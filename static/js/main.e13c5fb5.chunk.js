(this["webpackJsonpwekancode-login"]=this["webpackJsonpwekancode-login"]||[]).push([[0],{101:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(48),o=t.n(l),c=(t(67),t(6)),s=t(14),i=(t(68),t(58)),u=(t(71),t(10)),m=t.n(u),d=t(88);var h=function(){var e=r.a.useContext(A).dispatch,a=r.a.useState({email:"",password:"",isSubmitting:!1,errorMessage:null}),t=Object(c.a)(a,2),n=t[0],l=t[1];return r.a.createElement("div",{className:"container"},r.a.createElement(i.a,{initialValues:{email:"",password:""},validate:function(e){var a={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)?e.password||(a.password="Password is Required one"):a.email="Invalid email address":a.email="Email is Required",a},onSubmit:function(a,t){t.isSubmitting;l(Object(s.a)({},n,{isSubmitting:!0,errorMessage:null})),console.log(a);var r=JSON.parse(JSON.stringify(a)),o=d(r.password).toString("hex"),c={email:"".concat(r.email),password:"".concat(o)};console.log(c),m.a.post("https://dev.api.staller.show/v1/users/login",c).then((function(a){e({type:"LOGIN",payload:a.data.data})})).catch((function(e){l(Object(s.a)({},n,{isSubmitting:!1,errorMessage:e.message}))}))}},(function(e){var a=e.values,t=e.errors,n=e.touched,l=e.handleChange,o=e.handleBlur,c=e.handleSubmit,s=e.isSubmitting;return r.a.createElement("form",{onSubmit:c},r.a.createElement("input",{type:"email",name:"email",onChange:l,onBlur:o,value:a.email,placeholder:"Enter Your email address"}),t.email&&n.email&&t.email,r.a.createElement("input",{type:"password",name:"password",onChange:l,onBlur:o,value:a.password,placeholder:"Enter your password"}),t.password&&n.password&&t.password,r.a.createElement("button",{type:"submit",disabled:s},"Submit"))})))},p=function(){var e=r.a.useContext(A),a=e.state,t=e.dispatch;return r.a.createElement("nav",{id:"navigation"},r.a.createElement("h1",{href:"#",className:"logo"},"Wekancode"),r.a.createElement("button",{onClick:function(){return t({type:"LOGOUT"})}},a.isAuthenticated&&r.a.createElement("h1",null,"Hi ",a.user," (LOGOUT)")))},E=t(16),b=t.n(E),g=t(34),v=t(24);r.a.createContext();var f=function(e){var a=Object(n.useState)([]),t=Object(c.a)(a,2),l=t[0],o=t[1],s=Object(n.useState)(!0),i=Object(c.a)(s,2),u=i[0],d=i[1],h=r.a.useContext(A).state;return Object(n.useEffect)((function(){!function(){var e;b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b.a.awrap(m()("https://dev.api.staller.show/v1/horses",{headers:{Authorization:"Bearer ".concat(h.token)}}));case 2:e=a.sent,console.log(e.data),o(e.data.data),d(!1);case 6:case"end":return a.stop()}}))}()}),[h.token]),r.a.createElement("div",null,u&&r.a.createElement(v.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")),r.a.createElement("button",{className:"toggle-button",onClick:function(){e.history.push({pathname:"/create"})}},"ADD HORSES"),r.a.createElement(g.a,null,"Click Here to view Horses List:",l.map((function(a,t){return r.a.createElement(g.a.Item,{key:t,action:!0,onClick:function(){var t;t=a.id,e.history.push({pathname:"/show/"+t})}},a.horse_name)}))))},_=t(13),j=t(55),y=t(102),O=t(103),C=t(56),w=t(35),k=t(19);var S=Object(k.f)((function(e){var a=Object(n.useState)({id:"",horse_name:"",horse_number:"",age_verified:"",dob:"",color:"",ushja_registered:""}),t=Object(c.a)(a,2),l=t[0],o=t[1],i=Object(n.useState)(!0),u=Object(c.a)(i,2),d=u[0],h=u[1],p=r.a.useContext(A).state,E="https://dev.api.staller.show/v1/horses/"+e.match.params.id;Object(n.useEffect)((function(){h(!1);!function(){var e;b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b.a.awrap(m()(E,{headers:{Authorization:"Bearer ".concat(p.token)}}));case 2:e=a.sent,o(e.data.data),console.log(e.data),h(!1);case 6:case"end":return a.stop()}}))}()}),[]);var g=function(e){e.persist(),o(Object(s.a)({},l,Object(_.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",null,d&&r.a.createElement(v.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")),r.a.createElement(j.a,null,r.a.createElement(y.a,null,r.a.createElement(O.a,{onSubmit:function(a){h(!0),a.preventDefault();var t={horse_name:l.horse_name,horse_number:l.horse_number,age_verified:parseInt(l.age_verified),ushja_registered:parseInt(l.ushja_registered),dob:l.dob,color:l.color};console.log(t),m.a.put(E,t,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)}}).then((function(a){h(!1),console.log(a),e.history.push({pathname:"/show/"+a.data.data.id})})).catch((function(e){return h(!1)}))}},r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Horses Name"),r.a.createElement(O.a.Control,{type:"text",name:"horse_name",id:"horse_name",placeholder:"Enter Horses name",value:l.horse_name,onChange:g})),r.a.createElement("br",null),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Horses Number"),r.a.createElement(O.a.Control,{type:"number",name:"horse_number",id:"horse_number",placeholder:"Enter Horses Number",value:l.horse_number,onChange:g})),r.a.createElement("br",null),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Date of Birth "),r.a.createElement(O.a.Control,{type:"date",name:"dob",id:"dob",placeholder:"Enter Date of Birth",value:l.dob,onChange:g})),r.a.createElement("br",null),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Age Verified"),r.a.createElement(C.a,{ls:12},r.a.createElement(C.a,{ls:6},r.a.createElement("input",{type:"radio",name:"age_verified",id:"age_verified",value:"1",checked:"1"==l.age_verified,onChange:g}),r.a.createElement("span",null,"Yes")),r.a.createElement(C.a,{ls:6},r.a.createElement("input",{type:"radio",name:"age_verified",id:"age_verified",value:"0",checked:"0"==l.age_verified,onChange:g}),r.a.createElement("span",null,"No")))),r.a.createElement("br",null),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Ushja Registered"),r.a.createElement(C.a,{ls:12},r.a.createElement(C.a,{ls:6},r.a.createElement(O.a.Check,{type:"checkbox",name:"ushja_registered",id:"ushja_registered",value:"1",checked:"1"==l.ushja_registered,onChange:g,label:" Yes"})),r.a.createElement(C.a,{ls:6},r.a.createElement(O.a.Check,{type:"checkbox",name:"ushja_registered",id:"ushja_registered",value:"0",checked:"0"==l.ushja_registered,onChange:g,label:" No"})))),r.a.createElement("br",null),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Colour"),r.a.createElement(O.a.Control,{as:"select",name:"color"},r.a.createElement("option",{selected:"Red"===l.color,value:"Red"},"Red"),r.a.createElement("option",{selected:"Green"===l.color,value:"Green"},"Green"))),r.a.createElement("br",null),r.a.createElement(w.a,{variant:"primary",type:"submit"},"Update")))))}));var N=Object(k.f)((function(e){var a,t,l=Object(n.useState)({id:"",horse_name:"",horse_number:"",age_verified:"",dob:"",color:"",ushja_registered:""}),o=Object(c.a)(l,2),i=o[0],u=o[1],d=Object(n.useState)(!1),h=Object(c.a)(d,2),p=h[0],E=h[1],b=r.a.useContext(A).state,g=function(e){e.persist(),u(Object(s.a)({},i,Object(_.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",null,p&&r.a.createElement(v.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")),r.a.createElement(j.a,null,r.a.createElement(y.a,null,r.a.createElement(O.a,{onSubmit:function(a){E(!0),a.preventDefault();var t={horse_name:i.horse_name,horse_number:i.horse_number,age_verified:parseInt(i.age_verified),ushja_registered:parseInt(i.ushja_registered),dob:i.dob,color:i.color};console.log(t),m.a.post("https://dev.api.staller.show/v1/horses",t,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(b.token)}}).then((function(a){E(!1),e.history.push({pathname:"/show/"+a.data.data.id})})).catch((function(e){return E(!1)}))}},r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Horses Name"),r.a.createElement(O.a.Control,{type:"text",name:"horse_name",id:"horse_name",placeholder:"Enter Horses name",value:i.horse_name,onChange:g})),r.a.createElement("br",null),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Horses Number"),r.a.createElement(O.a.Control,{type:"number",name:"horse_number",id:"horse_number",placeholder:"Enter Horses Number",value:i.horse_number,onChange:g})),r.a.createElement("br",null),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Date of Birth "),r.a.createElement(O.a.Control,{type:"date",name:"dob",id:"dob",placeholder:"Enter Date of Birth",value:i.dob,onChange:g})),r.a.createElement("br",null),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Age Verified"),r.a.createElement(C.a,{ls:12},r.a.createElement(C.a,{ls:6},r.a.createElement("input",{type:"radio",name:"age_verified",id:"age_verified",value:"1",onChange:g}),r.a.createElement("span",null,"Yes")),r.a.createElement(C.a,{ls:6},r.a.createElement("input",{type:"radio",name:"age_verified",id:"age_verified",value:"0",onChange:g}),r.a.createElement("span",null,"No")))),r.a.createElement("br",null),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Ushja Registered"),r.a.createElement(C.a,{ls:12},r.a.createElement(C.a,{ls:6},r.a.createElement(O.a.Check,{type:"checkbox",name:"ushja_registered",id:"ushja_registered",value:"1",onChange:g,label:" Yes"})),r.a.createElement(C.a,{ls:6},r.a.createElement(O.a.Check,{type:"checkbox",name:"ushja_registered",id:"ushja_registered",value:"0",onChange:g,label:" No"})))),r.a.createElement("br",null),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Colour"),r.a.createElement(O.a.Control,{as:"select",id:"color"},r.a.createElement("option",Object(_.a)({value:"red"},"value",""),"Choose a colour"),r.a.createElement("option",(a={value:"red"},Object(_.a)(a,"value","red"),Object(_.a)(a,"name","color"),a),"Red"),r.a.createElement("option",(t={value:"green"},Object(_.a)(t,"value","green"),Object(_.a)(t,"name","color"),t),"Green"))),r.a.createElement("br",null),r.a.createElement(w.a,{variant:"primary",type:"submit"},"Create")))))}));var x=Object(k.f)((function(e){var a=Object(n.useState)({}),t=Object(c.a)(a,2),l=t[0],o=t[1],s=Object(n.useState)(!0),i=Object(c.a)(s,2),u=i[0],d=i[1],h=r.a.useContext(A).state,p="https://dev.api.staller.show/v1/horses/"+e.match.params.id;return Object(n.useEffect)((function(){d(!1);!function(){var e;b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b.a.awrap(m()(p,{headers:{Authorization:"Bearer ".concat(h.token)}}));case 2:e=a.sent,console.log(e),o(e.data.data),d(!1);case 6:case"end":return a.stop()}}))}()}),[]),r.a.createElement("div",null,u&&r.a.createElement(v.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")),r.a.createElement(j.a,null,r.a.createElement("h1",null,"Horse Name : ",l.horse_name),r.a.createElement("p",null,"Horse Number : ",l.horse_number),r.a.createElement("h2",null,"Age Verified : ","1"==l.age_verified?"Yes":"No"),r.a.createElement("h2",null,"Date of Birth : ",l.dob),r.a.createElement("h2",null,"color: ",l.color),r.a.createElement("h2",null,"Ushja Registered : ","1"==l.ushja_registered?"Yes":"No"),r.a.createElement("p",null,r.a.createElement(w.a,{type:"button",variant:"primary",onClick:function(){var a;a=l.id,e.history.push({pathname:"/edit/"+a})}},"Edit"),"\xa0",r.a.createElement(w.a,{type:"button",variant:"danger",onClick:function(){!function(a){d(!0);var t={horse_name:l.horse_name,horse_number:l.horse_number,age_verified:parseInt(l.age_verified),ushja_registered:parseInt(l.ushja_registered),dob:l.dob,color:l.color};m.a.delete(p,t,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h.token)}}).then((function(a){d(!1),e.history.push({pathname:"/list"})})).catch((function(e){return d(!1)}))}(l.id)}},"Delete"))))})),L=t(20),G=function(){return r.a.createElement("main",null,r.a.createElement(L.a,null,r.a.createElement(k.c,null,r.a.createElement(k.a,{exact:!0,path:"/",component:f}),r.a.createElement(k.a,{path:"/edit/:id",component:S}),r.a.createElement(k.a,{path:"/create",component:N}),r.a.createElement(k.a,{path:"/show/:id",component:x}))))},A=r.a.createContext(),B={isAuthenticated:!1,user:null,token:null},I=function(e,a){switch(a.type){case"LOGIN":return console.log(a.payload),localStorage.setItem("user",JSON.stringify(a.payload.email)),localStorage.setItem("token",JSON.stringify(a.payload.access_token)),Object(s.a)({},e,{isAuthenticated:!0,user:a.payload.email,token:a.payload.access_token});case"LOGOUT":return localStorage.clear(),Object(s.a)({},e,{isAuthenticated:!1,user:null});default:return e}};var H=function(){var e=r.a.useReducer(I,B),a=Object(c.a)(e,2),t=a[0],n=a[1];return r.a.useEffect((function(){var e=JSON.parse(localStorage.getItem("email")),a=JSON.parse(localStorage.getItem("access_token"));e&&a&&n({type:"LOGIN",payload:{user:e,token:a}})}),[]),r.a.createElement(A.Provider,{value:{state:t,dispatch:n}},r.a.createElement(p,null),r.a.createElement("div",{className:"App"},t.isAuthenticated?r.a.createElement(G,null):r.a.createElement(h,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},62:function(e,a,t){e.exports=t(101)},67:function(e,a,t){},68:function(e,a,t){},71:function(e,a,t){}},[[62,1,2]]]);
//# sourceMappingURL=main.e13c5fb5.chunk.js.map